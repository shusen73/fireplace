(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{47:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(0),i=n(29),a=n.n(i),c=n(17),s=n(51),l=n(23),d=n(3),u={space:[0,4,8,16,32,64,128,256,512],fonts:{body:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", sans-serif',heading:"inherit",monospace:"Menlo, monospace"},fontSizes:[12,14,16,20,24,32,48,64,96],fontWeights:{body:400,heading:700,bold:700},lineHeights:{body:1.5,heading:1.125},colors:{text:"#1D3557",background:"#F1FAEE",primary:"#457B9D",secondary:"#A8DADC",accent:"#E63946",muted:"#f1faee"},styles:{root:{fontFamily:"body",lineHeight:"body",fontWeight:"body"},h1:{color:"text",fontFamily:"heading",lineHeight:"heading",fontWeight:"heading",fontSize:5},h2:{color:"text",fontFamily:"heading",lineHeight:"heading",fontWeight:"heading",fontSize:4},h3:{color:"text",fontFamily:"heading",lineHeight:"heading",fontWeight:"heading",fontSize:3},h4:{color:"text",fontFamily:"heading",lineHeight:"heading",fontWeight:"heading",fontSize:2},h5:{color:"text",fontFamily:"heading",lineHeight:"heading",fontWeight:"heading",fontSize:1},h6:{color:"text",fontFamily:"heading",lineHeight:"heading",fontWeight:"heading",fontSize:0},p:{color:"text",fontFamily:"body",fontWeight:"body",lineHeight:"body"},a:{color:"primary"},pre:{fontFamily:"monospace",overflowX:"auto",code:{color:"inherit"}},code:{fontFamily:"monospace",fontSize:"inherit"},table:{width:"100%",borderCollapse:"separate",borderSpacing:0},th:{textAlign:"left",borderBottomStyle:"solid"},td:{textAlign:"left",borderBottomStyle:"solid"},img:{maxWidth:"100%"}}},h=n(15),f=n.n(h),m=n(20),g=n(50),b=n(49),j=function(e){var t=e.localStream,n=e.setLocalStream,i=e.setRemoteStream,a=Object(o.useState)(null),s=Object(c.a)(a,2),l=s[0],u=s[1],h=Object(o.useState)(""),j=Object(c.a)(h,2),x=j[0],p=j[1],O=Object(d.f)();Object(o.useEffect)((function(){u(new window.Peer(Object(g.a)()))}),[O,n,i]),Object(o.useEffect)((function(){null!=l&&l.on("call",function(){var e=Object(m.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:r=e.sent,n(r),t.answer(r),t.on("stream",(function(e){i(e),O.push("./video-room")}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[l]);var y=function(){var e=Object(m.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia({video:!0,audio:!0});case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(m.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:t=e.sent,n(t),l.call(x,t).on("stream",(function(e){i(e),O.push("/video-room")}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(b.c,{sx:{minHeight:"100vh",alignItems:"center"},p:3,bg:"muted",children:Object(r.jsxs)(b.a,{onSubmit:function(e){return e.preventDefault()},m:"auto",sx:{width:["100%","50%"]},children:[Object(r.jsx)(b.f,{sx:{},my:3,children:"Your ID is:"}),Object(r.jsx)(b.f,{m:3,children:null===l||void 0===l?void 0:l.id}),Object(r.jsx)(b.f,{sx:{},my:3,children:"Connect to:"}),Object(r.jsx)(b.e,{value:x,onChange:function(e){p(e.target.value)},my:3}),Object(r.jsx)(b.c,{sx:{alignItems:"center"},children:Object(r.jsx)(b.b,{onClick:function(){return v(l,x,t)},my:3,sx:{width:["100%"]},children:"Go"})})]})})})},x=n(27),p=n.n(x),O=n(33),y=n(34),v=n(2);function S(e){var t=e.srcObject,n=Object(y.a)(e,["srcObject"]),r=Object(o.useRef)(null);return Object(o.useEffect)((function(){r.current&&(r.current.srcObject=t)}),[t]),Object(v.c)("video",Object(O.a)({ref:r},n))}var w=function(e){var t=e.localStream,n=e.remoteStream;return Object(o.useEffect)((function(){var e={x:0,y:0};p()("#remoteVideo").draggable({modifiers:[p.a.modifiers.restrictRect({restriction:"parent",endOnly:!0})],listeners:{start:function(e){console.log(e.type,e.target)},move:function(t){e.x+=t.dx,e.y+=t.dy,t.target.style.transform="translate(".concat(e.x,"px, ").concat(e.y,"px)")}}})})),Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(b.d,{sx:{gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(3,1fr)",minHeight:"100vh",maxHeight:"100vh"},children:[Object(r.jsx)(b.c,{sx:{alignItems:"center",gridColumn:"1/4",gridRow:"1/4"},bg:"muted",children:Object(r.jsx)(S,{srcObject:n,autoPlay:!0,sx:{width:"100%"}})}),Object(r.jsx)(b.c,{id:"remoteVideo",sx:{alignItems:"center",gridColumn:"1/2",gridRow:"3/4",margin:"auto"},bg:"muted",children:Object(r.jsx)(S,{srcObject:t,autoPlay:!0,sx:{width:"100%"}})})]})})},F=function(){var e=Object(o.useState)(null),t=Object(c.a)(e,2),n=t[0],i=t[1],a=Object(o.useState)(null),h=Object(c.a)(a,2),f=h[0],m=h[1];return Object(r.jsx)(s.a,{theme:u,children:Object(r.jsx)(l.a,{children:Object(r.jsxs)(d.c,{children:[Object(r.jsx)(d.a,{exact:!0,path:"/",children:Object(r.jsx)(j,{localStream:n,setLocalStream:i,setRemoteStream:m})}),Object(r.jsx)(d.a,{path:"/video-room",children:Object(r.jsx)(w,{localStream:n,remoteStream:f})})]})})})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),o(e),i(e),a(e)}))};a.a.render(Object(r.jsx)(F,{}),document.getElementById("root")),H()}},[[47,1,2]]]);
//# sourceMappingURL=main.57b44fdb.chunk.js.map