{"version":3,"sources":["theme.js","pages/LandingPage.js","components/Video.js","pages/VideoRoom.js","App.js","reportWebVitals.js","index.js"],"names":["theme","space","fonts","body","heading","monospace","fontSizes","fontWeights","bold","lineHeights","colors","text","background","primary","secondary","accent","muted","styles","root","fontFamily","lineHeight","fontWeight","h1","color","fontSize","h2","h3","h4","h5","h6","p","a","pre","overflowX","code","table","width","borderCollapse","borderSpacing","th","textAlign","borderBottomStyle","td","img","maxWidth","LandingPage","localStream","setLocalStream","setRemoteStream","useState","peer","setPeer","remotePeerId","setRemotePeerId","history","useHistory","useEffect","window","Peer","uuidv4","on","call","getUserMedia","stream","answer","remoteStream","push","navigator","mediaDevices","video","audio","console","log","mediaCallRemote","sx","minHeight","alignItems","bg","onSubmit","e","preventDefault","m","my","id","value","onChange","target","onClick","Video","srcObject","props","refVideo","useRef","current","ref","VideoRoom","position","x","y","interact","draggable","modifiers","restrictRect","restriction","endOnly","listeners","start","event","type","move","dx","dy","style","transform","gridTemplateColumns","gridTemplateRows","maxHeight","gridColumn","gridRow","autoPlay","margin","App","exact","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"sLAiHeA,EAhHD,CACZC,MAAO,CAAC,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,IAAK,IAAK,KACvCC,MAAO,CACLC,KACE,iGACFC,QAAS,UACTC,UAAW,oBAEbC,UAAW,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAC5CC,YAAa,CACXJ,KAAM,IACNC,QAAS,IACTI,KAAM,KAERC,YAAa,CACXN,KAAM,IACNC,QAAS,OAEXM,OAAQ,CACNC,KAAM,UACNC,WAAY,UACZC,QAAS,UACTC,UAAW,UACXC,OAAQ,UACRC,MAAO,WAETC,OAAQ,CACNC,KAAM,CACJC,WAAY,OACZC,WAAY,OACZC,WAAY,QAEdC,GAAI,CACFC,MAAO,OACPJ,WAAY,UACZC,WAAY,UACZC,WAAY,UACZG,SAAU,GAEZC,GAAI,CACFF,MAAO,OACPJ,WAAY,UACZC,WAAY,UACZC,WAAY,UACZG,SAAU,GAEZE,GAAI,CACFH,MAAO,OACPJ,WAAY,UACZC,WAAY,UACZC,WAAY,UACZG,SAAU,GAEZG,GAAI,CACFJ,MAAO,OACPJ,WAAY,UACZC,WAAY,UACZC,WAAY,UACZG,SAAU,GAEZI,GAAI,CACFL,MAAO,OACPJ,WAAY,UACZC,WAAY,UACZC,WAAY,UACZG,SAAU,GAEZK,GAAI,CACFN,MAAO,OACPJ,WAAY,UACZC,WAAY,UACZC,WAAY,UACZG,SAAU,GAEZM,EAAG,CACDP,MAAO,OACPJ,WAAY,OACZE,WAAY,OACZD,WAAY,QAEdW,EAAG,CACDR,MAAO,WAETS,IAAK,CACHb,WAAY,YACZc,UAAW,OACXC,KAAM,CACJX,MAAO,YAGXW,KAAM,CACJf,WAAY,YACZK,SAAU,WAEZW,MAAO,CACLC,MAAO,OACPC,eAAgB,WAChBC,cAAe,GAEjBC,GAAI,CACFC,UAAW,OACXC,kBAAmB,SAErBC,GAAI,CACFF,UAAW,OACXC,kBAAmB,SAErBE,IAAK,CACHC,SAAU,U,yCCtBDC,EAjFK,SAAC,GAAsD,IAApDC,EAAmD,EAAnDA,YAAaC,EAAsC,EAAtCA,eAAgBC,EAAsB,EAAtBA,gBAAsB,EAChDC,mBAAS,MADuC,mBACjEC,EADiE,KAC3DC,EAD2D,OAEhCF,mBAAS,IAFuB,mBAEjEG,EAFiE,KAEnDC,EAFmD,KAGpEC,EAAUC,cACdC,qBAAU,WACRL,EAAQ,IAAIM,OAAOC,KAAKC,kBACvB,CAACL,EAASP,EAAgBC,IAE7BQ,qBAAU,WACI,MAARN,GACJA,EAAKU,GAAG,OAAR,uCAAgB,WAAOC,GAAP,eAAA9B,EAAA,sEAEO+B,IAFP,OAERC,EAFQ,OAGdhB,EAAegB,GACfF,EAAKG,OAAOD,GACZF,EAAKD,GAAG,UAAU,SAACK,GACjBjB,EAAgBiB,GAChBX,EAAQY,KAAK,mBAPD,2CAAhB,yDAUC,CAAChB,IACJ,IAAMY,EAAY,uCAAG,4BAAA/B,EAAA,6DACfgC,EAAS,KADM,kBAGFI,UAAUC,aAAaN,aAAa,CACjDO,OAAO,EACPC,OAAO,IALQ,OAGjBP,EAHiB,uDASjBQ,QAAQC,IAAR,MATiB,iCAWZT,GAXY,yDAAH,qDAcZU,EAAe,uCAAG,4BAAA1C,EAAA,sEACH+B,IADG,OAClBC,EADkB,OAEtBhB,EAAegB,GACJb,EAAKW,KAAKT,EAAcW,GAC9BH,GAAG,UAAU,SAAUK,GAE1BjB,EAAgBiB,GAChBX,EAAQY,KAAK,kBAPO,2CAAH,qDAUrB,OACE,mCACE,cAAC,IAAD,CAAMQ,GAAI,CAAEC,UAAW,QAASC,WAAY,UAAY9C,EAAG,EAAG+C,GAAG,QAAjE,SACE,eAAC,IAAD,CACEC,SAAU,SAACC,GAAD,OAAOA,EAAEC,kBACnBC,EAAG,OACHP,GAAI,CAAEtC,MAAO,CAAC,OAAQ,QAHxB,UAKE,cAAC,IAAD,CAAMsC,GAAI,GAAIQ,GAAI,EAAlB,yBAGA,cAAC,IAAD,CAAMD,EAAG,EAAT,gBAAa/B,QAAb,IAAaA,OAAb,EAAaA,EAAMiC,KACnB,cAAC,IAAD,CAAMT,GAAI,GAAIQ,GAAI,EAAlB,yBAGA,cAAC,IAAD,CACEE,MAAOhC,EACPiC,SAAU,SAACN,GACT1B,EAAgB0B,EAAEO,OAAOF,QAE3BF,GAAI,IAEN,cAAC,IAAD,CAAMR,GAAI,CAAEE,WAAY,UAAxB,SACE,cAAC,IAAD,CACEW,QAAS,kBAAMd,EAAgBvB,EAAME,EAAcN,IACnDoC,GAAI,EACJR,GAAI,CAAEtC,MAAO,CAAC,SAHhB,0B,wCCpEG,SAASoD,EAAT,GAAyC,IAAxBC,EAAuB,EAAvBA,UAAcC,EAAS,6BAC/CC,EAAWC,iBAAO,MAOxB,OALApC,qBAAU,WACHmC,EAASE,UACdF,EAASE,QAAQJ,UAAYA,KAC5B,CAACA,IAEG,iCAAOK,IAAKH,GAAcD,ICTnC,IA4DeK,EA5DG,SAAC,GAAmC,IAAjCjD,EAAgC,EAAhCA,YAAamB,EAAmB,EAAnBA,aAuBhC,OAtBAT,qBAAU,WACR,IAAMwC,EAAW,CAAEC,EAAG,EAAGC,EAAG,GAC5BC,IAAS,gBAAgBC,UAAU,CACjCC,UAAW,CACTF,IAASE,UAAUC,aAAa,CAC9BC,YAAa,SACbC,SAAS,KAGbC,UAAW,CACTC,MADS,SACHC,GACJpC,QAAQC,IAAImC,EAAMC,KAAMD,EAAMrB,SAEhCuB,KAJS,SAIJF,GACHX,EAASC,GAAKU,EAAMG,GACpBd,EAASE,GAAKS,EAAMI,GACpBJ,EAAMrB,OAAO0B,MAAMC,UAAnB,oBAA4CjB,EAASC,EAArD,eAA6DD,EAASE,EAAtE,cAON,mCACE,eAAC,IAAD,CACExB,GAAI,CACFwC,oBAAqB,iBACrBC,iBAAkB,gBAClBxC,UAAW,QACXyC,UAAW,SALf,UAQE,cAAC,IAAD,CACE1C,GAAI,CACFE,WAAY,SACZyC,WAAY,MACZC,QAAS,OAEXzC,GAAG,QANL,SAQE,cAACW,EAAD,CAAOC,UAAWxB,EAAcsD,UAAQ,EAAC7C,GAAI,CAAEtC,MAAO,YAExD,cAAC,IAAD,CACE+C,GAAG,cACHT,GAAI,CACFE,WAAY,SACZyC,WAAY,MACZC,QAAS,MACTE,OAAQ,QAEV3C,GAAG,QARL,SAUE,cAACW,EAAD,CAAOC,UAAW3C,EAAayE,UAAQ,EAAC7C,GAAI,CAAEtC,MAAO,kBC1BhDqF,EAxBH,WAAO,IAAD,EACsBxE,mBAAS,MAD/B,mBACTH,EADS,KACIC,EADJ,OAEwBE,mBAAS,MAFjC,mBAETgB,EAFS,KAEKjB,EAFL,KAIhB,OACE,cAAC,IAAD,CAAehD,MAAOA,EAAtB,SACE,cAAC,IAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAO0H,OAAK,EAACC,KAAK,IAAlB,SACE,cAAC,EAAD,CACE7E,YAAaA,EACbC,eAAgBA,EAChBC,gBAAiBA,MAGrB,cAAC,IAAD,CAAO2E,KAAK,cAAZ,SACE,cAAC,EAAD,CAAW7E,YAAaA,EAAamB,aAAcA,cCZhD2D,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCFdQ,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,SAKjDZ,M","file":"static/js/main.57b44fdb.chunk.js","sourcesContent":["// example theme.js\nconst theme = {\n  space: [0, 4, 8, 16, 32, 64, 128, 256, 512],\n  fonts: {\n    body:\n      'system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", sans-serif',\n    heading: \"inherit\",\n    monospace: \"Menlo, monospace\",\n  },\n  fontSizes: [12, 14, 16, 20, 24, 32, 48, 64, 96],\n  fontWeights: {\n    body: 400,\n    heading: 700,\n    bold: 700,\n  },\n  lineHeights: {\n    body: 1.5,\n    heading: 1.125,\n  },\n  colors: {\n    text: \"#1D3557\",\n    background: \"#F1FAEE\",\n    primary: \"#457B9D\",\n    secondary: \"#A8DADC\",\n    accent: \"#E63946\",\n    muted: \"#f1faee\",\n  },\n  styles: {\n    root: {\n      fontFamily: \"body\",\n      lineHeight: \"body\",\n      fontWeight: \"body\",\n    },\n    h1: {\n      color: \"text\",\n      fontFamily: \"heading\",\n      lineHeight: \"heading\",\n      fontWeight: \"heading\",\n      fontSize: 5,\n    },\n    h2: {\n      color: \"text\",\n      fontFamily: \"heading\",\n      lineHeight: \"heading\",\n      fontWeight: \"heading\",\n      fontSize: 4,\n    },\n    h3: {\n      color: \"text\",\n      fontFamily: \"heading\",\n      lineHeight: \"heading\",\n      fontWeight: \"heading\",\n      fontSize: 3,\n    },\n    h4: {\n      color: \"text\",\n      fontFamily: \"heading\",\n      lineHeight: \"heading\",\n      fontWeight: \"heading\",\n      fontSize: 2,\n    },\n    h5: {\n      color: \"text\",\n      fontFamily: \"heading\",\n      lineHeight: \"heading\",\n      fontWeight: \"heading\",\n      fontSize: 1,\n    },\n    h6: {\n      color: \"text\",\n      fontFamily: \"heading\",\n      lineHeight: \"heading\",\n      fontWeight: \"heading\",\n      fontSize: 0,\n    },\n    p: {\n      color: \"text\",\n      fontFamily: \"body\",\n      fontWeight: \"body\",\n      lineHeight: \"body\",\n    },\n    a: {\n      color: \"primary\",\n    },\n    pre: {\n      fontFamily: \"monospace\",\n      overflowX: \"auto\",\n      code: {\n        color: \"inherit\",\n      },\n    },\n    code: {\n      fontFamily: \"monospace\",\n      fontSize: \"inherit\",\n    },\n    table: {\n      width: \"100%\",\n      borderCollapse: \"separate\",\n      borderSpacing: 0,\n    },\n    th: {\n      textAlign: \"left\",\n      borderBottomStyle: \"solid\",\n    },\n    td: {\n      textAlign: \"left\",\n      borderBottomStyle: \"solid\",\n    },\n    img: {\n      maxWidth: \"100%\",\n    },\n  },\n};\nexport default theme;\n","import React, { useEffect, useState } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { useHistory } from \"react-router-dom\";\n\nimport { Text, Box, Flex, Button, Input } from \"theme-ui\";\n\nconst LandingPage = ({ localStream, setLocalStream, setRemoteStream }) => {\n  const [peer, setPeer] = useState(null);\n  const [remotePeerId, setRemotePeerId] = useState(\"\");\n  let history = useHistory();\n  useEffect(() => {\n    setPeer(new window.Peer(uuidv4()));\n  }, [history, setLocalStream, setRemoteStream]);\n\n  useEffect(() => {\n    if (peer == null) return;\n    peer.on(\"call\", async (call) => {\n      // get user media\n      const stream = await getUserMedia();\n      setLocalStream(stream);\n      call.answer(stream); // Answer the call with an A/V stream.\n      call.on(\"stream\", (remoteStream) => {\n        setRemoteStream(remoteStream);\n        history.push(\"./video-room\");\n      });\n    });\n  }, [peer]);\n  const getUserMedia = async () => {\n    let stream = null;\n    try {\n      stream = await navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: true,\n      });\n    } catch (err) {\n      /* handle the error */\n      console.log(err);\n    }\n    return stream;\n  };\n\n  const mediaCallRemote = async () => {\n    let stream = await getUserMedia();\n    setLocalStream(stream);\n    var call = peer.call(remotePeerId, stream);\n    call.on(\"stream\", function (remoteStream) {\n      // Show stream in some video/canvas element.\n      setRemoteStream(remoteStream);\n      history.push(\"/video-room\");\n    });\n  };\n  return (\n    <>\n      <Flex sx={{ minHeight: \"100vh\", alignItems: \"center\" }} p={3} bg=\"muted\">\n        <Box\n          onSubmit={(e) => e.preventDefault()}\n          m={\"auto\"}\n          sx={{ width: [\"100%\", \"50%\"] }}\n        >\n          <Text sx={{}} my={3}>\n            Your ID is:\n          </Text>\n          <Text m={3}>{peer?.id}</Text>\n          <Text sx={{}} my={3}>\n            Connect to:\n          </Text>\n          <Input\n            value={remotePeerId}\n            onChange={(e) => {\n              setRemotePeerId(e.target.value);\n            }}\n            my={3}\n          ></Input>\n          <Flex sx={{ alignItems: \"center\" }}>\n            <Button\n              onClick={() => mediaCallRemote(peer, remotePeerId, localStream)}\n              my={3}\n              sx={{ width: [\"100%\"] }}\n            >\n              Go\n            </Button>\n          </Flex>\n        </Box>\n      </Flex>\n    </>\n  );\n};\nexport default LandingPage;\n","/** @jsxRuntime classic */\n/** @jsx jsx */\nimport { jsx } from \"theme-ui\";\n\nimport { useEffect, useRef } from \"react\";\n\nexport default function Video({ srcObject, ...props }) {\n  const refVideo = useRef(null);\n\n  useEffect(() => {\n    if (!refVideo.current) return;\n    refVideo.current.srcObject = srcObject;\n  }, [srcObject]);\n\n  return <video ref={refVideo} {...props} />;\n}\n","import React, { useEffect } from \"react\";\nimport { Flex, Grid } from \"theme-ui\";\nimport interact from \"interactjs\";\n\nimport Video from \"../components/Video\";\nconst VideoRoom = ({ localStream, remoteStream }) => {\n  useEffect(() => {\n    const position = { x: 0, y: 0 };\n    interact(\"#remoteVideo\").draggable({\n      modifiers: [\n        interact.modifiers.restrictRect({\n          restriction: \"parent\",\n          endOnly: true,\n        }),\n      ],\n      listeners: {\n        start(event) {\n          console.log(event.type, event.target);\n        },\n        move(event) {\n          position.x += event.dx;\n          position.y += event.dy;\n          event.target.style.transform = `translate(${position.x}px, ${position.y}px)`;\n        },\n      },\n    });\n  });\n\n  return (\n    <>\n      <Grid\n        sx={{\n          gridTemplateColumns: \"repeat(3, 1fr)\",\n          gridTemplateRows: \"repeat(3,1fr)\",\n          minHeight: \"100vh\",\n          maxHeight: \"100vh\",\n        }}\n      >\n        <Flex\n          sx={{\n            alignItems: \"center\",\n            gridColumn: \"1/4\",\n            gridRow: \"1/4\",\n          }}\n          bg=\"muted\"\n        >\n          <Video srcObject={remoteStream} autoPlay sx={{ width: \"100%\" }} />\n        </Flex>\n        <Flex\n          id=\"remoteVideo\"\n          sx={{\n            alignItems: \"center\",\n            gridColumn: \"1/2\",\n            gridRow: \"3/4\",\n            margin: \"auto\",\n          }}\n          bg=\"muted\"\n        >\n          <Video srcObject={localStream} autoPlay sx={{ width: \"100%\" }} />\n        </Flex>\n      </Grid>\n    </>\n  );\n};\n\nexport default VideoRoom;\n","import React, { useState } from \"react\";\nimport { ThemeProvider } from \"theme-ui\";\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\n\nimport theme from \"./theme\";\nimport LandingPage from \"./pages/LandingPage\";\nimport VideoRoom from \"./pages/VideoRoom\";\n\nconst App = () => {\n  const [localStream, setLocalStream] = useState(null);\n  const [remoteStream, setRemoteStream] = useState(null);\n\n  return (\n    <ThemeProvider theme={theme}>\n      <Router>\n        <Switch>\n          <Route exact path=\"/\">\n            <LandingPage\n              localStream={localStream}\n              setLocalStream={setLocalStream}\n              setRemoteStream={setRemoteStream}\n            />\n          </Route>\n          <Route path=\"/video-room\">\n            <VideoRoom localStream={localStream} remoteStream={remoteStream} />\n          </Route>\n        </Switch>\n      </Router>\n    </ThemeProvider>\n  );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}